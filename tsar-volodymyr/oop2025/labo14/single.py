from dataclasses import dataclass

# --- 1. Entity (Model) ---
# –¶–µ–π –∫–ª–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –¢–Ü–õ–¨–ö–ò –∑–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –¥–∞–Ω–∏—Ö.
# –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ @dataclass, —â–æ–± –Ω–µ –ø–∏—Å–∞—Ç–∏ –≤—Ä—É—á–Ω—É __init__, __repr__ —Ç–æ—â–æ.

@dataclass
class Post:
    """
    –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö –¥–ª—è –ü–æ—Å—Ç–∞.
    –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å: –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ—Å—Ç (–∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞ –∑–º—ñ—Å—Ç).
    –¶–µ–π –∫–ª–∞—Å –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—î –ø—Ä–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∞–±–æ —Ñ–∞–π–ª–æ–≤—É —Å–∏—Å—Ç–µ–º—É.
    """
    title: str
    content: str

    def get_summary(self) -> str:
        """–ü–æ–≤–µ—Ä—Ç–∞—î –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å –ø–æ—Å—Ç–∞ (–±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞, –ø–æ–≤'—è–∑–∞–Ω–∞ –∑ –¥–∞–Ω–∏–º–∏)."""
        return f"{self.title}: {self.content[:20]}..."


# --- 2. Service / Repository ---
# –¶–µ–π –∫–ª–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –¢–Ü–õ–¨–ö–ò –∑–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è (Persistence Layer).

class PostDBRepository:
    """
    –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.
    –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å: –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ Post —É —Å—Ö–æ–≤–∏—â–µ.
    """
    def save(self, post: Post) -> None:
        """
        –Ü–º—ñ—Ç–∞—Ü—ñ—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Å—Ç–∞ –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö.
        """
        # –¢—É—Ç –º—ñ—Å—Ç–∏—Ç—å—Å—è –ª–æ–≥—ñ–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î (SQL, Mongo —Ç–æ—â–æ)
        print(f"üíæ [Database] Connecting...")
        print(f"üíæ [Database] Saving post: '{post.title}'")
        print("‚úÖ [Database] Success!")


class PostFileRepository:
    """
    –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π. –ó–±–µ—Ä—ñ–≥–∞—î —É —Ñ–∞–π–ª.
    –î–µ–º–æ–Ω—Å—Ç—Ä—É—î, —è–∫ –ª–µ–≥–∫–æ –∑–º—ñ–Ω–∏—Ç–∏ —Å–ø–æ—Å—ñ–± –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è, –Ω–µ —á—ñ–ø–∞—é—á–∏ –∫–ª–∞—Å Post.
    """
    def save(self, post: Post) -> None:
        filename = f"{post.title.replace(' ', '_')}.txt"
        print(f"üìÇ [File System] Writing to file '{filename}'...")
        # with open(filename, 'w') as f: f.write(post.content)
        print("‚úÖ [File System] Saved.")


# --- Client Code ---
if __name__ == "__main__":
    # 1. –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Å—Ç (–ø—Ä–æ—Å—Ç–æ –¥–∞–Ω—ñ)
    new_post = Post(
        title="SOLID Principles", 
        content="Single Responsibility Principle states that..."
    )

    # 2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
    # –ú–∏ –º–æ–∂–µ–º–æ –≤–∏–±—Ä–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π —Å–ø–æ—Å—ñ–± –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è, –Ω–µ –∑–º—ñ–Ω—é—é—á–∏ —Å–∞–º –ü–æ—Å—Ç
    
    # –í–∞—Ä—ñ–∞–Ω—Ç –ê: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
    db_repo = PostDBRepository()
    db_repo.save(new_post)

    print("-" * 20)

    # –í–∞—Ä—ñ–∞–Ω—Ç –ë: –§–∞–π–ª
    file_repo = PostFileRepository()
    file_repo.save(new_post)