# МІНІСТЕРСТВО ОСВІТИ ТА НАУКИ

## Львівський національний університет ветеринарії і біотехнологій імені С.З.Ґжицького

# Звіт

**про виконання лаборатоної роботи №15**

**з дисципліни "Об'єктно-орієнтоване програмування"**

**на тему**

**Якість коду. Рефакторинг**

Виконав: студент групи КН-31 Козицький Андрій

Перевірив: ст. викладач Назар Заплатинський

### Львів 2025

**Мета роботи - Познайомитися з поняттями якості коду, code smells та техніками рефакторингу**

## Хід роботи

### Поняття якості коду

Якість коду - це сукупність характеристик програмного коду, які впливають на його здатність відповідати вимогам та забезпечувати ефективну розробку та підтримку.

#### Складові якості коду:

1. **Читабельність (Readability)**

   - Код легко читати та розуміти
   - Зрозумілі назви змінних, функцій, класів
   - Правильне форматування та структура

2. **Розширюваність (Extensibility)**

   - Можливість легко додавати нову функціональність
   - Відкритий для розширення, закритий для модифікації (OCP)

3. **Підтримуваність (Maintainability)**

   - Легко виправляти помилки
   - Просто вносити зміни
   - Добре структурований код

4. **Тестованість (Testability)**
   - Код легко тестувати
   - Можливість ізолювати компоненти
   - Наявність unit-тестів

### "Чистий" та "брудний" код

**Чистий код:**

- Легко читається та розуміється
- Дотримується принципів SOLID
- Має чітку структуру та відповідальності
- Добре документований
- Легко тестується

**Брудний код:**

- Важко читати та розуміти
- Порушує принципи проєктування
- Містить дублювання коду
- Має великі методи та класи
- Важко тестувати

### Code Smells

Code smells - це індикатори проблем у коді, які не є помилками, але вказують на потенційні проблеми з дизайном та підтримкою.

#### Типові code smells:

1. **Дуже довгий метод (Long Method)**

   - Метод виконує занадто багато дій
   - Важко читати та тестувати
   - Рішення: розбити на менші методи

2. **Великий клас (Large Class)**

   - Клас має занадто багато відповідальностей
   - Рішення: розділити на менші класи

3. **Дублювання коду (Duplicated Code)**

   - Однаковий код у різних місцях
   - Рішення: винести в окрему функцію/клас

4. **Магічні числа (Magic Numbers)**

   - Числа без пояснень в коді
   - Рішення: використати константи з назвами

5. **Мертвий код (Dead Code)**
   - Код, який ніколи не виконується
   - Рішення: видалити

### Процес рефакторингу

Рефакторинг - це процес зміни внутрішньої структури коду без зміни його зовнішньої поведінки.

#### Етапи рефакторингу:

1. **Визначення проблеми**

   - Виявлення code smells
   - Аналіз складних місць коду

2. **Планування**

   - Вибір техніки рефакторингу
   - Оцінка ризиків

3. **Виконання**

   - Поступові зміни
   - Перевірка після кожної зміни

4. **Тестування**

   - Перевірка, що функціональність не порушена
   - Запуск тестів

5. **Коміт змін**
   - Збереження в системі контролю версій
   - Створення опису змін

### Техніки рефакторингу

1. **Перейменування (Rename)**

   - Зміна назв змінних, методів, класів на більш зрозумілі

2. **Переміщення (Move)**

   - Переміщення методів/класів у правильні місця

3. **Спрощення (Simplify)**

   - Видалення непотрібної складності
   - Використання простіших конструкцій

4. **Переписування (Rewrite)**
   - Повна перебудова частини коду
   - Застосування нових підходів

### Приклад: Code Smell - Дуже довга функція

У файлі `code_smell_example.js` показано приклад code smell "Дуже довга функція" та його виправлення через рефакторинг.

**Проблема:** Функція `registerUserBad()` виконує занадто багато дій:

- Валідацію email
- Валідацію імені
- Збереження в БД
- Відправку email
- Логування
- Створення профілю

Всі ці дії виконуються в одній функції, що ускладнює читання, тестування та підтримку коду.

**Рішення:**

1. Розділити велику функцію на окремі функції з єдиною відповідальністю:

   - `validateEmail()` - валідація email
   - `validateName()` - валідація імені
   - `saveUser()` - збереження в БД
   - `sendWelcomeEmail()` - відправка email
   - `logUserRegistration()` - логування
   - `createProfile()` - створення профілю

2. Винести константи:
   - `EMAIL_REGEX` - регулярний вираз для email
   - `MIN_NAME_LENGTH` - мінімальна довжина імені
   - `ERROR_MESSAGES` - повідомлення про помилки

Це робить код більш читабельним, легшим для тестування та підтримки.

### Запуск прикладу:

```bash
node code_smell_example.js
```

## Висновок:

У ході виконання лабораторної роботи було вивчено поняття якості коду, code smells та техніки рефакторингу. Якість коду є критично важливою для підтримки та розвитку програмного забезпечення. Виявлення та усунення code smells через рефакторинг сприяє створенню чистого, читабельного та легко підтримуваного коду. Дотримання принципів якості коду забезпечує ефективну роботу команди розробників та зменшує витрати на підтримку програмного забезпечення.
