## Міністерство освіти і науки України  
## Львівський національний університет ветеринарії і біотехнологій імені С. З. Ґжицького  

# Звіт  
про виконання лабораторної роботи №5 з дисципліни "**Об’єктно орієнтоване програмування**"  
на тему: **Рефакторинг програмного забезпечення**

Виконав: студент групи **КН-31** Вирста Андрій  
Прийняв: викл. **Назар Заплатинський**

Львів — 2025  

---

## **Мета**
Ознайомитися з основними принципами та найбільш поширеними техніками рефакторингу програмного забезпечення,  
навчитися виявляти «запахи коду» і покращувати структуру програми без зміни її функціональності.

---

## **Хід роботи**

1. **Ознайомився з поняттям рефакторингу.**  
   Рефакторинг — це процес зміни структури коду без зміни його зовнішньої поведінки.  
   Його мета — зробити програму зрозумілішою, чистішою, простішою для підтримки та розширення.

2. **Основні принципи рефакторингу:**  
   - Змінювати код без впливу на його функціональність.  
   - Робити невеликі кроки.  
   - Мати можливість перевіряти результат після кожної зміни.  
   - Уникати дублювання коду.  
   - Використовувати осмислені назви класів, методів і змінних.

3. **Основні техніки рефакторингу:**
   - **Extract Method** — винесення частини великого методу в окремий.  
   - **Rename Method / Variable** — перейменування для покращення читабельності.  
   - **Move Method / Field** — перенесення методу чи поля в більш відповідний клас.  
   - **Replace Magic Number with Constant** — заміна «магічних чисел» на константи.  
   - **Simplify Conditional Expressions** — спрощення умов.

4. **Обрана техніка: Extract Method (Виділення методу)**  
   Ця техніка застосовується, коли метод виконує одразу кілька завдань.  
   Частину логіки виносимо в окремий метод, щоб зробити код зрозумілішим.

---

## **Приклад реалізації**

### ❌ До рефакторингу
```python
class Order:
    def __init__(self, items):
        self.items = items  # список (назва, кількість, ціна)

    def print_invoice(self):
        total = 0
        print("=== РАХУНОК ===")
        for name, qty, price in self.items:
            subtotal = qty * price
            print(f"{name}: {qty} x {price} = {subtotal}")
            total += subtotal
        print("----------------")
        print(f"Разом: {total} грн")
```
У цьому коді клас **Order** виконує одразу кілька дій:  
- підраховує суму замовлення,  
- формує текст рахунку,  
- виводить його на екран.  

Це порушує принцип єдиної відповідальності (SRP) і створює «запах коду» **Long Method (довгий метод)**.

---

### ✅ Після рефакторингу
```python
class OrderRefactored:
    def __init__(self, items):
        self.items = items

    def calculate_total(self):
        return sum(qty * price for _, qty, price in self.items)

    def generate_invoice_text(self):
        lines = ["=== РАХУНОК ==="]
        for name, qty, price in self.items:
            lines.append(f"{name}: {qty} x {price} = {qty * price}")
        lines.append("----------------")
        lines.append(f"Разом: {self.calculate_total()} грн")
        return "\n".join(lines)

    def print_invoice(self):
        print(self.generate_invoice_text())
```

**Результат:**  
- Логіка розділена на три короткі методи.  
- Кожен метод має одну чітку відповідальність.  
- Код став зрозумілішим, легше тестується та розширюється.

---

## **“Запах коду” — Long Method**
**Long Method** — це ознака, що метод виконує забагато дій або містить надмірну логіку.  
Виправлення: застосування техніки **Extract Method** — розділення великого методу на менші з чіткими завданнями.

---

## **Результат виконання програми**
```
=== РАХУНОК ===
Хліб: 2 x 25 = 50
Молоко: 1 x 35 = 35
Сир: 1 x 80 = 80
----------------
Разом: 165 грн
```

---

## **Висновки**
У ході виконання лабораторної роботи я ознайомився з поняттям рефакторингу, його принципами  
та основними техніками. На практиці застосував техніку **Extract Method**,  
яка дозволила спростити довгий метод і зробити програму більш читабельною.  
Рефакторинг допомагає створювати якісний, чистий і гнучкий код без зміни його поведінки.

